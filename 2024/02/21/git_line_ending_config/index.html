<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Git line ending config - jdhao's digital space</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="jdhao"><meta name=description content="This post is about how to set up Git so that people using different operating systems can work in the same repository, without messing up the line ending of source files.
"><meta name=keywords content="Hugo,theme,even"><meta name=google-site-verification content="HTz0VHxqny_b0FfS774dICLBzHGBZCb_S11j_akF1Tw"><meta name=generator content="Hugo 0.105.0 with theme even"><link rel=canonical href=https://jdhao.github.io/2024/02/21/git_line_ending_config/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-6058871559165202",enable_page_level_ads:!0})</script><link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="Git line ending config"><meta property="og:description" content="This post is about how to set up Git so that people using different operating systems can work in the same repository,
without messing up the line ending of source files."><meta property="og:type" content="article"><meta property="og:url" content="https://jdhao.github.io/2024/02/21/git_line_ending_config/"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-02-21T23:11:43+01:00"><meta property="article:modified_time" content="2024-02-21T23:15:15+01:00"><meta itemprop=name content="Git line ending config"><meta itemprop=description content="This post is about how to set up Git so that people using different operating systems can work in the same repository,
without messing up the line ending of source files."><meta itemprop=datePublished content="2024-02-21T23:11:43+01:00"><meta itemprop=dateModified content="2024-02-21T23:15:15+01:00"><meta itemprop=wordCount content="447"><meta itemprop=keywords content="Git,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git line ending config"><meta name=twitter:description content="This post is about how to set up Git so that people using different operating systems can work in the same repository,
without messing up the line ending of source files."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>jdhao's digital space</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/about/><li class=mobile-menu-item>About</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>jdhao's digital space</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Git line ending config</h1><div class=post-meta><span class=post-time>2024-02-21</span><div class=post-category><a href=/categories/Git/>Git</a></div><span class=more-meta>447 words</span>
<span class=more-meta>3 mins read</span>
<span id=busuanzi_container_page_pv class=more-meta><span id=busuanzi_value_page_pv><img src=/img/spinner.svg alt=spinner.svg></span> times read</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#settings-for-personal-use-not-good-not-recommended>Settings for personal use (not good, not recommended)</a></li><li><a href=#for-repository>For repository</a></li><li><a href=#references>References</a></li></ul></nav></div></div><div class=post-content><p>This post is about how to set up Git so that people using different operating systems can work in the same repository,
without messing up the line ending of source files.</p><h1 id=settings-for-personal-use-not-good-not-recommended>Settings for personal use (not good, not recommended)</h1><p>We can change the <code>core.autocrlf</code> setting:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git config --global core.autocrlf true
</span></span></code></pre></div><p>By setting <code>core.autocrlf</code> to <code>true</code>, if your original file line ending is CRLF, it will not change,
but when you commit your files, git will normalize the line ending to LF.</p><p>After the above setup, you can run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git add --renormalize .
</span></span></code></pre></div><p>This will put the normalized text files in your repo to the git index,
You can then commit the changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git commit -m &#34;Renormalize line ending to LF&#34;
</span></span></code></pre></div><p>Note that the files in your local working tree still have original line ending.
For example, if <code>foo.py</code> has CRLF line ending, and <code>bar.py</code> has LF line ending,
they will remain so in your working tree.</p><h1 id=for-repository>For repository</h1><p>The above setting is not enforceable, because everyone has to set it up individually.
So it is not really ideal way to make sure everyone has the correct line ending setup.</p><p>We can use the <code>.gitattributes</code> file to enforce this.
Create a file named <code>.gitattributes</code> in the root directory of the project:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>* text=auto
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># mark this file as always have crlf line ending on checkout
</span></span><span class=line><span class=cl>*.bat text eol=crlf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># mark pattern as binary file
</span></span><span class=line><span class=cl>*.jpg binary
</span></span></code></pre></div><p>The setting here will overwrite the <code>core.autocrlf</code> setting.</p><p>We can then run the re-normalize command to normalize the line ending:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git add --renormalize .
</span></span><span class=line><span class=cl>git commit -m &#34;Renormalize line ending to LF&#34;
</span></span></code></pre></div><p>But this will not change the line ending for the file in the working tree.
If we run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git ls-files --eol
</span></span></code></pre></div><p>It shows something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>i/lf    w/lf    attr/text=auto          .gitattributes
</span></span><span class=line><span class=cl>i/lf    w/lf    attr/text=auto          another-file.md
</span></span><span class=line><span class=cl>i/lf    w/crlf  attr/text=auto          demo.txt
</span></span><span class=line><span class=cl>i/lf    w/crlf  attr/text eol=crlf      execute.bat
</span></span></code></pre></div><p><code>i/lf</code> means the file copy at index is using LF line ending.
<code>w/lf</code> or <code>w/crlf</code> means the line ending used in the working tree.
In this case, for <code>demo.txt</code>, the file copy in the working tree is still using the CRLF line ending.</p><p>To correct this and use LF line ending also for text file not explicitly specified to use CRLF,
we can run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git rm --cached -r .
</span></span><span class=line><span class=cl>git reset --hard HEAD
</span></span></code></pre></div><p>After this, if you run the ls-files command again, you should be able to see something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>i/lf    w/lf    attr/text=auto          .gitattributes
</span></span><span class=line><span class=cl>i/lf    w/lf    attr/text=auto          another-file.md
</span></span><span class=line><span class=cl>i/lf    w/lf    attr/text=auto          demo.txt
</span></span><span class=line><span class=cl>i/lf    w/crlf  attr/text eol=crlf      execute.bat
</span></span></code></pre></div><h1 id=references>References</h1><ul><li>a clear explanation of <code>core.autocrlf</code>: <a href=https://stackoverflow.com/a/20653073/6064933>https://stackoverflow.com/a/20653073/6064933</a></li><li><a href=https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings>https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings</a></li><li>official doc: <a href=https://git-scm.com/docs/gitattributes#_end_of_line_conversion>https://git-scm.com/docs/gitattributes#_end_of_line_conversion</a></li><li>An excellent post about newline setting for git: <a href=https://www.aleksandrhovhannisyan.com/blog/crlf-vs-lf-normalizing-line-endings-in-git/>https://www.aleksandrhovhannisyan.com/blog/crlf-vs-lf-normalizing-line-endings-in-git/</a></li></ul></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>jdhao</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2024-02-21</span></p><p class=copyright-item><span class=item-title>License</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/Git/>Git</a></div><nav class=post-nav><a class=next href=/2024/02/04/garmin_forrunner_setup/><span class="next-text nav-default">Garmin Forerunner 965 Essential Tips and Setups</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><script src=https://utteranc.es/client.js repo=jdhao/jdhao.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:jdhao@hotmail.com class="iconfont icon-email" title=email></a>
<a href="https://stackoverflow.com/users/6064933/jdhao?tab=profile" class="iconfont icon-stack-overflow" title=stack-overflow></a>
<a href=https://github.com/jdhao class="iconfont icon-github" title=github></a>
<a href=https://jdhao.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer><span id=busuanzi_container_site_pv>site pv: <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span></span>
<span class=division>|</span>
<span id=busuanzi_container_site_uv>site uv: <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span></span></div><span class=copyright-year>&copy;
2017 -
2024<span class=heart><i class="iconfont icon-heart"></i></span><span>jdhao</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=text/javascript>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"}}</script><script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-113395108-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script id=baidu_push>(function(){if(window.location.hostname==="localhost")return;var t,n,e=document.createElement("script");e.async=!0,n=window.location.protocol.split(":")[0],n==="https"?e.src="https://zz.bdstatic.com/linksubmit/push.js":e.src="http://push.zhanzhang.baidu.com/push.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script></body></html>