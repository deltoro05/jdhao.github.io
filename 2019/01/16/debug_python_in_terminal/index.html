<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>How to Debug Python Code in Terminal - Blowfish</title>
<meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="jdhao"><meta name=description content=" "><meta name=generator content="Hugo 0.123.8 with theme even"><link rel=canonical href=https://jdhao.github.io/2019/01/16/debug_python_in_terminal/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-6058871559165202",enable_page_level_ads:!0})</script><link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet><meta property="og:title" content="How to Debug Python Code in Terminal"><meta property="og:description" content="

"><meta property="og:type" content="article"><meta property="og:url" content="https://jdhao.github.io/2019/01/16/debug_python_in_terminal/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-01-16T10:21:12+08:00"><meta property="article:modified_time" content="2021-10-16T15:43:09+02:00"><meta itemprop=name content="How to Debug Python Code in Terminal"><meta itemprop=description content="

"><meta itemprop=datePublished content="2019-01-16T10:21:12+08:00"><meta itemprop=dateModified content="2021-10-16T15:43:09+02:00"><meta itemprop=wordCount content="641"><meta itemprop=keywords content="debug,terminal,"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Debug Python Code in Terminal"><meta name=twitter:description content="

"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Blowfish</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/posts/><li class=mobile-menu-item>Archives</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/about/><li class=mobile-menu-item>About</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Blowfish</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/posts/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><div class=post-content><p align=center><img src=https://blog-resource-1257868508.file.myqcloud.com/20190116225245.jpg width=600></p><p>When I use <a href=https://www.jetbrains.com/pycharm/download/>Pycharm</a> a while ago,
I get used to debugging my code with its built-in GUI debugger, which works
really well. But when I write code on a server without X11 support, I am forced
to use <a href=https://neovim.io/>Neovim</a> for Python development. My debugging is
reduced to a serize of <code>print</code> statement in the source code. It works well for
simple programs. Once my source code becomes long enough or complex enough, it
becomes inefficient to add <code>print</code> one by one to just play with an object.</p><p>Finally, I decided to give terminal debuggers a try. In this post, I introduce
three debuggers.</p><h1 id=pdb>Pdb</h1><p>Python ships with a native debugger called
<a href=https://docs.python.org/3/library/pdb.html>pdb</a>.</p><p>You can debug your code with intrusive way or non-introsive way. For the
intrusive way, you need to modify your source code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pdb</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># put the following statement where you want the code to stop and step to pdb</span>
</span></span><span class=line><span class=cl><span class=n>pdb</span><span class=o>.</span><span class=n>set_trace</span><span class=p>()</span>
</span></span></code></pre></div><p>Personally, I prefer the non-intrusive way to invode pdb. You can run pdb as module:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python -m pdb your_script.py
</span></span></code></pre></div><p>It will start debugging your code from the begining of the code.</p><h2 id=common-commands>Common commands</h2><p>Pdb provides a few commands to help you debug your code on its interacitve
interface. Here, I list some of the commands and their meanings:</p><ul><li><code>n</code>: execute the next line</li><li><code>p</code>: print the value of an object</li><li><code>s</code>: step into a function</li><li><code>r</code>: return from a function</li><li><code>b [num]</code>: set a breakpoint at line <code>[NUM]</code></li><li><code>c</code>: continue to run the code until a break point is met</li><li><code>unt [NUM]</code>: run the code until line <code>[NUM]</code></li><li><code>whatis</code>: print the type of object (similar to <code>p type(some_object)</code>)</li><li><code>l</code>: list the context of current line (default 11 lines)</li><li><code>h</code>: show help message</li><li><code>q</code>: quit the debugger</li></ul><h2 id=how-to-enable-autocomplete>How to enable autocomplete</h2><p>By default, pdb does not provide auto-completion for variable names and object
methods. To enable auto-completion, create a file <code>.pdbrc</code> under your <strong>HOME</strong>
directory with the following settings:</p><pre tabindex=0><code>import rlcompleter
import pdb

pdb.Pdb.complete=rlcompleter.Completer(locals()).complete
</code></pre><h1 id=ipdb>ipdb</h1><p><a href=https://github.com/gotcha/ipdb>Ipdb</a> is like pdb, but with built-in
autocompletion, syntax highlighting and more commands. You can install it with
pip:</p><pre tabindex=0><code>pip install ipdb
</code></pre><p>Its usage is similar to pdb, so I will not waste time here. One thing worth
noting is that ipdb adds a <code>sticky</code> command:</p><pre tabindex=0><code>sticky [start end]

Toggle sticky mode. When in sticky mode, it clear the screen
and longlist the current functions, making the source
appearing always in the same position. Useful to follow the
flow control of a function when doing step-by-step execution.

If ``start`` and ``end`` are given, sticky mode is enabled and
only lines within that range (extremes included) will be
displayed.
</code></pre><p>It means that in stick mode, the current function will be shown and current
line will be highlighted to make your follow the execution of program easier.</p><p align=center><img src=https://blog-resource-1257868508.file.myqcloud.com/20190116230104.png width=600></p><h1 id=pudb>pudb</h1><p>Another terminal debugger worth trying is
<a href=https://documen.tician.de/pudb/misc.html>pudb</a>. First, install it with pip:</p><pre tabindex=0><code>pip install pudb
</code></pre><p>To invoke it, you can either use</p><pre tabindex=0><code>python -m pudb my_script.py
</code></pre><p>or simply</p><pre tabindex=0><code>pudb3 my_script.py
</code></pre><p>Pudb creates a GUI-like interface for debugging your code. It will show your
code, current variable, stack trace, break points and a terminal window in its
terminal interface.</p><p><img src=https://blog-resource-1257868508.file.myqcloud.com/20190116230928.png></p><p>You can use <code>k</code> and <code>j</code> to move the cursor line up and down and use <code>b</code> to set
a break point, which will be highlighted in red. To execute next line of code,
use <code>n</code>. To run the code until a break point, use <code>c</code>. For more usage, press
<code>h</code>.</p><p>Overall, it is quite powerful, considering that it is implemented in a
terminal.</p><h1 id=conclusion>Conclusion</h1><p>In this post, I introduced three Python debuggers &mdash; pdb, ipdb and pudb. They
can both help us to debug the code. Personally, I think pudb is the most
<em>beautiful</em> one I want to use.</p><h1 id=references>References</h1><ul><li><a href=https://stackoverflow.com/questions/15971201/autocomplete-and-tab-key-in-pdb>Enable auto-completion for pdb</a>.</li><li><a href=https://stackoverflow.com/questions/4929251/can-you-step-through-python-code-to-help-debug-issues>Python debugger discussions</a></li><li><a href=https://wiki.python.org/moin/PythonDebuggingTools>A list of Python debugger</a>.</li></ul><hr><p>Title image is taken from <a href=https://opensourceprojects.org/python-debugging-using-pdb/>here</a></p></div></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=https://jdhao.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span><span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span><span class=copyright-year>&copy;
-
2024<span class=heart><i class="iconfont icon-heart"></i></span><span>jdhao</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script><script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script><script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script></body></html>